var EVEShipInfo_SlotTypes=null,EVEShipInfo_MetaTypes=null,EVEShipInfo_Fitting=function(i,t,n,e,s){this.linkID=i,this.jsID=i+"-fit",this.id=t,this.name=n,this.ship={name:e,id:s},this.slots=[],this.shown=!1,this.rendered=!1,this.ElementID=function(i){return this.jsID+"_"+i},this.Element=function(i){return jQuery("#"+this.ElementID(i))},this.Show=function(){if(this.shown)return void this.Hide()
var i=jQuery("#"+this.linkID)
if(0!=i.length){if(this.rendered)jQuery("#"+this.jsID).show()
else{var t='<div id="'+this.jsID+'" class="shipinfo-fittingbox"><div class="shipinfo-fittingbox-wrap"><div class="shipinfo-fittingbox-header"><span class="shipinfo-fittingbox-fitname">'+this.name+' </span> <span class="shipinfo-fittingbox-shipname"><a href="javascript:void(0)" class="shipinfo-shiplink" onclick="EVEShipInfo.InfoPopup(\''+this.ship.id+"')\">"+this.ship.name+'</a></span></div><div class="shipinfo-fittingbox-content" id="'+this.ElementID("content")+'">'+this.ExportTextonly(!0)+'</div><div class="shipinfo-nav-wrapper shipinfo-fitting-nav"><div class="shipinfo-dismiss" id="'+this.ElementID("dismiss")+'">&times;</div><ul class="shipinfo-nav"><li class="shipinfo-nav-item" id="'+this.ElementID("nav-evepraisal")+'">EVEPraisal</li><li class="shipinfo-nav-item" id="'+this.ElementID("nav-copy")+'">'+EVEShipInfo_Translation.Translate("Copy")+"</li>"
EVEShipInfo.IsAdmin()&&(t+='<li class="shipinfo-nav-item" id="'+this.ElementID("nav-edit")+'">'+EVEShipInfo_Translation.Translate("Edit")+"</li>"),t+='</ul></div><div style="display:none"><form action="http://evepraisal.com/estimate" method="post" target="_blank" id="'+this.ElementID("praisalform")+'"><input type="hidden" name="raw_paste" value="'+this.ExportTextonly()+'"/><input type="hidden" name="hide_buttons" value="false"/><input type="hidden" name="paste_autosubmit" value="false"/><input type="hidden" name="market" value="30000142"/><input type="hidden" name="save" value="true"/></form></div></div></div>',i.after(t),this.rendered=!0
var n=this
setTimeout(function(){n.PostRender()},80)}this.shown=!0}},this.PostRender=function(){var i=this
this.Element("dismiss").on("click",function(){i.Hide()}),this.Element("nav-evepraisal").click(function(){jQuery("#"+i.ElementID("praisalform")).submit()}),this.Element("nav-copy").click(function(){i.CopyToClipboard(i.ElementID("content"))}),EVEShipInfo.IsAdmin()&&this.Element("nav-edit").click(function(){document.location=EVEShipInfo.adminBaseURL+"page=eveshipinfo_eftfittings&action=edit&fid="+i.id})},this.Hide=function(){jQuery("#"+this.jsID).hide(),this.shown=!1},this.ExportHTML=function(i){return 0!=i&&(i=!0),this.Export("<br/>",i)},this.ExportTextonly=function(i){return 1!=i&&(i=!1),this.Export("\n",i)},this.Export=function(i,t){var n=this.slots,e=""
return t===!0&&(e+="["+this.ship.name+", "+this.GetName()+"]"+i),jQuery.each(EVEShipInfo_SlotTypes,function(t,s){var o=0
jQuery.each(n,function(t,n){n.GetType()==s&&(e+=n.Render()+i,o++)}),o>0&&(e+=i)}),e},this.GetShipID=function(){return this.ship.id},this.GetName=function(){return this.name},this.AddSlot=function(i,t,n,e,s){var o=new EVEShipInfo_Fitting_Slot(i,t,n,e,s)
return this.slots.push(o),o},this.CopyToClipboard=function(i){if(document.selection){var t=document.body.createTextRange()
t.moveToElementText(document.getElementById(i)),t.select().createTextRange(),document.execCommand("Copy")}else if(window.getSelection){window.getSelection().removeAllRanges()
var t=document.createRange()
t.selectNode(document.getElementById(i)),window.getSelection().addRange(t),document.execCommand("Copy")}}},EVEShipInfo_Fitting_Slot=function(i,t,n,e,s){this.id=i,this.itemName=t,this.amount=n,this.slotType=e,this.meta=s,this.Render=function(){var i=this.itemName
return null!==this.amount&&this.amount>0&&(i+=" x "+this.amount),i},this.GetType=function(){return this.slotType}}
